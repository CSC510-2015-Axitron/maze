var trailModel={width:20,height:20,overlayEffectOn:!1,backTrackOn:!0,theBoard:[],userData:{ID:"",timer:0,step:0,level:0},create:function(t,e){trailModel.width="undefined"!=typeof e?e.width||trailModel.width:trailModel.width,trailModel.height="undefined"!=typeof e?e.height||trailModel.height:trailModel.height,this.dot=t,this.trace={},this.lastDot=0,this.lastX=0,this.lastY=0,this.debugOn=!1;for(var a=trailModel.width;a--;){trailModel.theBoard.push([]);for(var i=trailModel.height;i--;)trailModel.theBoard[trailModel.width-a-1].push(0)}this.setOverlayEffect=function(t){trailModel.overlayEffectOn=boolean(t)},this.setBackTrack=function(t){trailModel.backTrackOn=boolean(t)},this.trace=new backtrack.model}};trailModel.create.prototype.exists=function(t,e){flag=!trailModel.backTrackOn||(flag=this.trace.onTrack(t,e));var a=trailModel.theBoard[t][e];return this.debugOn&&console.log(t+","+e+":"+flag+", dot exists: "+(0!=a)),a?(flag&&(this.lastDot=a,a.remove(),trailModel.theBoard[this.lastX=t][this.lastY=e]=0),trailModel.overlayEffectOn,!0):!1},trailModel.create.prototype.makeTrail=function(t,e){var a=e.x,i=e.y,l=a/32,r=i/32;this.exists(l,r)||(0!=this.lastDot&&(trailModel.theBoard[this.lastX][this.lastY]=this.lastDot,t.prepend(this.lastDot),this.lastDot=0),this.lastDot=new this.dot(a,i),trailModel.theBoard[this.lastX=l][this.lastY=r]=this.lastDot)},trailModel.userData=function(){this.startTime=0,this.startTimer=function(){this.startTime=Date.getTime()},this.Step=function(){++trailModel.userData.step},this.setLevel=function(t){trailModel.userData.level=t},this.getGameTime=function(){return trailModel.userData.timer=(Date.getTime()-this.StartTime)/1e3}};